<!doctype html>
	<head>
		<title>English Songs Learning</title>
	</head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<body>
	    <div id="headerTitle"></div>
		<div><input type="text" id="text-to-speech" placeholder="Type the spoken word" autofocus/></div>
        <div><button type="button" onclick="Game.NextWord()">Next</button></div>
		<div id="LastWord"></div>
		<div><button type="button" onclick="Game.SpeakActualWord()">Speak</button></div>
		<div id="Summary"></div>
		<!-- <div id="SummaryTest"></div> -->
		<div><button type="button" onclick="location.href = 'index.html'">New Game</button></div>		
        <br/>
        <div id="CountingLabel"></div>		
		<div id = "version" class="footer">		
			<p></p>	
		</div>

	</body>
	<script src="script.js"></script>
	<script src="game.js"></script>
	<script src="SongDatabase.js"></script>
	<script>		  
			function GameOver(theGame)
			{
				//Buttons Off
				//Edit Off				
				console.log("The Game Is Over");
				document.getElementById("Summary").outerHTML = theGame.ReportDiv();
			}

	        function LabelUpdate(index,total,Lword)
			{
				document.getElementById("CountingLabel").innerText = "Word " + index + " from " + total;
				
				if (Lword != "")
				{
				   document.getElementById("LastWord").innerText = "Last Word: " + Lword;
			    }
				else 
				{
					document.getElementById("LastWord").innerText = "";
				}
				console.log("labelUpdatePlz");
			}


		    let Game;
			console.log("Iniciou Pagina SongFrame");

			param = window.location.search;
			console.log(param);
			const urlParams = new URLSearchParams(param);
			console.log(urlParams);
			const songChoose = urlParams.get('song')
			
			console.log(songChoose);

			document.getElementById("headerTitle").outerHTML = "<h2>Song: "+songChoose+"</h2>"

	    	listWords = GetSongWords(songChoose);

			if ((listWords.lenght) == 0)
			{
				console.log("Deu Ruim")				

			}
			else {

		    	Game = new LearningGame(listWords,songChoose,LabelUpdate,GameOver);

				const selectElement = document.getElementById('text-to-speech');			
			    selectElement.addEventListener('keyup', (event) => 
				{
						if (event.key === "Enter") {
    	  				let right = Game.CheckWord(selectElement.value)			
				    	if (right){
	    					selectElement.value = "";
				    	}
						else 
						{
                            Game.WrongSound();
						}
					}
			    }); 

             	Game.StartGame()   	 				
	    	}



                				

				// document.getElementById("SummaryTest").outerHTML = GetSummaryTest();
			
	</script>
</html>